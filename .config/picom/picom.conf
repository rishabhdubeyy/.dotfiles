# Backend renderer
backend = "glx"; # For Nvidia GPU, GLX is optimal

# Enable vsync to reduce tearing
vsync = true;

# General options
use-damage = true;  # Only repaint the damaged part of the screen to save resources
vsync = true;
detect-rounded-corners = true;
unredir-if-possible = true; # Reduce GPU usage when idle

# Blur settings
blur:
{
    method = "dual_kawase";  # Provides a good balance between performance and appearance
    strength = 5;  # Adjust this for more or less blur effect
    background = true;  # Apply blur to background windows
};

# Blur specific windows (like terminal)
blur-background-exclude = [
    "class_g = 'Polybar'",   # Do not blur polybar
    "class_g = 'Rofi'",      # Do not blur rofi
    "class_g = 'Dunst'",     # Do not blur dunst notifications
    "class_g = 'Conky'",     # Do not blur conky
    "window_type = 'dock'",  # Do not blur docks
    "window_type = 'desktop'",  # Do not blur the desktop
    "_GTK_FRAME_EXTENTS@:c"  # Prevent glitches in GTK apps
];

# Shadow settings (can be disabled if not needed)
shadow = true;  # Enables shadows
shadow-radius = 7;
shadow-offset-x = -7;
shadow-offset-y = -7;
shadow-opacity = 0.3;
shadow-exclude = [
    "class_g = 'i3-frame'",
    "class_g = 'Polybar'",
    "class_g = 'Rofi'",
    "class_g = 'Dunst'",
    "_GTK_FRAME_EXTENTS@:c"
];

# Fading (optional, adds subtle transitions)
fading = true;
fade-delta = 12;
fade-in-step = 0.03;
fade-out-step = 0.03;
no-fading-openclose = false;

# Opacity
inactive-opacity = 0.85;
active-opacity = 1;
opacity-rule = [
    "90:class_g = 'kitty'",  # Specific opacity for terminal (kitty in this case)
];

# Optimization options
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
xrender-sync-fence = true;  # Helps prevent screen tearing
refresh-rate = 60;  # Set to match your monitor's refresh rate
sw-opti = true;  # Use software-optimized settings

# Nvidia optimizations
glx-swap-method = "undefined";  # Optimizes frame swap for Nvidia GPUs
detect-client-opacity = true;  # Optimize detection of opacity settings

# Memory management
# Reduce memory usage by avoiding unnecessary operations
no-ewmh-fullscreen = true;
